{{!-- @scf-option { "targetName": "serverless.yml" } --}}
{{!-- @scf-option { "appenders": ["./appenders/yaml-appender"] } --}}

plugins:
  - serverless-step-functions

functions:
  defaultFunctionInitStep:
    enabled: true
    description: "Initial step for defaultFunctionInitStep"
    handler: src/defaultFunctionInitStep.handler

stepFunctions:
  stateMachines:
    defaultFunction:
      name: {{parameters.component}}-defaultFunction
      role: arn:aws:iam::${env:AWS_ACCOUNT_ID}:role/${self:service}-role-application
      definition:
        StartAt: Init
        States:
          Init:
            Type: Task
            Resource:
              Fn::GetAtt: ['defaultFunctionInitStep', Arn]
            End: true
  validate: true
